{"version":3,"file":"static/js/4548.0d063cb3.chunk.js","mappings":"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","sources":["pages/react/hooks/useTransition/fakeApi.ts","webpack://gh-react-site/./src/pages/react/hooks/useTransition/UseTransition.module.scss?c2fa","pages/react/hooks/useTransition/UseTransition.tsx"],"sourcesContent":["export function fetchProfileData(userId: number) {\n  const userPromise = fetchUser(userId);\n  const postsPromise = fetchPosts(userId);\n  return {\n    userId,\n    user: wrapPromise(userPromise),\n    posts: wrapPromise(postsPromise)\n  };\n}\n\n// Suspense integrations like Relay implement\n// a contract like this to integrate with React.\n// Real implementations can be significantly more complex.\n// Don't copy-paste this into your project!\nfunction wrapPromise(promise: Promise<any>) {\n  let status = \"pending\";\n  let result: any;\n  const suspender = promise.then(\n    r => {\n      status = \"success\";\n      result = r;\n    },\n    e => {\n      status = \"error\";\n      result = e;\n    }\n  );\n  return {\n    read() {\n      if (status === \"pending\") {\n        throw suspender;\n      } else if (status === \"error\") {\n        throw result;\n      } else if (status === \"success\") {\n        return result;\n      }\n    }\n  };\n}\n\nexport function fetchUser(userId: number) {\n  console.log(\"fetch user \" + userId + \"...\");\n  return new Promise(resolve => {\n    setTimeout(() => {\n      console.log(\"fetched user \" + userId);\n      switch (userId) {\n        case 0:\n          resolve({\n            name: \"Ringo Starr\"\n          });\n          break;\n        case 1:\n          resolve({\n            name: \"George Harrison\"\n          });\n          break;\n        case 2:\n          resolve({\n            name: \"John Lennon\"\n          });\n          break;\n        case 3:\n          resolve({\n            name: \"Paul McCartney\"\n          });\n          break;\n        default:\n          throw Error(\"Unknown user.\");\n      }\n    }, 2000 * Math.random());\n  });\n}\n\nexport function fetchPosts(userId: number) {\n  console.log(\n    \"fetch posts for \" + userId + \"...\"\n  );\n  return new Promise(resolve => {\n    setTimeout(() => {\n      console.log(\"fetched posts for \" + userId);\n      switch (userId) {\n        case 0:\n          resolve([\n            {\n              id: 0,\n              text:\n                \"I get by with a little help from my friends\"\n            },\n            {\n              id: 1,\n              text:\n                \"I'd like to be under the sea in an octupus's garden\"\n            },\n            {\n              id: 2,\n              text:\n                \"You got that sand all over your feet\"\n            }\n          ]);\n          break;\n        case 1:\n          resolve([\n            {\n              id: 0,\n              text:\n                \"Turn off your mind, relax, and float downstream\"\n            },\n            {\n              id: 1,\n              text: \"All things must pass\"\n            },\n            {\n              id: 2,\n              text:\n                \"I look at the world and I notice it's turning\"\n            }\n          ]);\n          break;\n        case 2:\n          resolve([\n            {\n              id: 0,\n              text:\n                \"Living is easy with eyes closed\"\n            },\n            {\n              id: 1,\n              text:\n                \"Nothing's gonna change my world\"\n            },\n            {\n              id: 2,\n              text: \"I am the walrus\"\n            }\n          ]);\n          break;\n        case 3:\n          resolve([\n            {\n              id: 0,\n              text: \"Woke up, fell out of bed\"\n            },\n            {\n              id: 1,\n              text: \"Here, there, and everywhere\"\n            },\n            {\n              id: 2,\n              text:\n                \"Two of us sending postcards, writing letters\"\n            }\n          ]);\n          break;\n        default:\n          throw Error(\"Unknown user.\");\n      }\n    }, 2000 * Math.random());\n  });\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"UseTransition_container__wq+jV\"};","import React, { useState, useTransition, Suspense, HTMLAttributes } from 'react';\nimport ReactDOM from \"react-dom/client\";\nimport { fetchProfileData } from \"./fakeApi\";\nimport styles from './UseTransition.module.scss'\n\nconst UseTransition = () => {\n    return (\n        <div className={styles.container}>\n            <Main />\n        </div>\n    );\n}\n\nexport default UseTransition;\n\nfunction getNextId(id: number) {\n    return id === 3 ? 0 : id + 1;\n}\n\nconst initialResource = fetchProfileData(0);\n\nfunction Main() {\n    const [resource, setResource] = useState(\n        initialResource\n    );\n    const [\n        isPending,\n        startTransition\n    ] = useTransition();\n    // ] = useTransition({ timeoutMs: 3000 });\n    return (\n        <>\n            <button\n                disabled={isPending}\n                onClick={() => {\n                    startTransition(() => {\n                        const nextUserId = getNextId(\n                            resource.userId\n                        );\n                        setResource(\n                            fetchProfileData(nextUserId)\n                        );\n                    });\n                }}\n            > Next </button>\n            {isPending ? \" Loading...\" : null}\n            <ProfilePage rsrc={resource} />\n        </>\n    );\n}\n\ninterface Props extends HTMLAttributes<any> {\n    rsrc: ReturnType<typeof fetchProfileData>,\n}\n\nconst ProfilePage: React.FC<Props> = ({ rsrc }) => {\n    return (\n        <Suspense\n            fallback={<h1>Loading profile...</h1>}\n        >\n            <ProfileDetails rsrc={rsrc} />\n            <Suspense\n                fallback={<h1>Loading posts...</h1>}\n            >\n                <ProfileTimeline rsrc={rsrc} />\n            </Suspense>\n        </Suspense>\n    );\n}\n\nconst ProfileDetails: React.FC<Props> = ({ rsrc }) => {\n    const user = rsrc.user.read();\n    return <h1>{user.name}</h1>;\n}\n\nconst ProfileTimeline: React.FC<Props> = ({ rsrc }) => {\n    const posts: { id: number, text: string }[] = rsrc.posts.read();\n    return (\n        <ul>\n            {posts.map(post => (\n                <li key={post.id}>{post.text}</li>\n            ))}\n        </ul>\n    );\n}\n"],"names":["fetchProfileData","userId","userPromise","console","log","Promise","resolve","setTimeout","name","Error","Math","random","fetchUser","postsPromise","id","text","fetchPosts","user","wrapPromise","posts","promise","result","status","suspender","then","r","e","read","className","styles","Main","initialResource","useState","resource","setResource","useTransition","isPending","startTransition","disabled","onClick","nextUserId","ProfilePage","rsrc","Suspense","fallback","ProfileDetails","ProfileTimeline","map","post"],"sourceRoot":""}