"use strict";(self.webpackChunkgh_react_site=self.webpackChunkgh_react_site||[]).push([[1777],{1777:function(e,n,t){t.r(n),t.d(n,{default:function(){return Cn}});var r=t(2791),o="McDondals_container__yZTEe",i=t(9023),d=t(885),s=t(5671),a=t(3144),c=t(2982),l=t(7326),u=t(9340),h=t(8347),m=t(4098),f={RU:{currencyCode:"RUB",currencyName:"Russian Ruble",currencyMin:.01,locale:"ru-RU",country:"Russia"},US:{currencyCode:"USD",currencyName:"US Dollar",currencyMin:.01,locale:"en-US",country:"United States"},EU:{currencyCode:"EUR",currencyName:"Euro",currencyMin:.01,locale:"de-DE",country:"European Union"},GB:{currencyCode:"GBP",currencyName:"British Pound",currencyMin:.01,locale:"en-GB",country:"United Kingdom"},JP:{currencyCode:"JPY",currencyName:"Japanese Yen",currencyMin:1,locale:"ja-JP",country:"Japan"},TH:{currencyCode:"THB",currencyName:"Thailand Baht",currencyMin:.01,locale:"th-TH",country:"Thailand"},IN:{currencyCode:"INR",currencyName:"India Rupee",currencyMin:.01,locale:"hi-IN",country:"India"}},v={RUB:"RU",USD:"US",EUR:"EU",GBP:"GB",JPY:"JP",THB:"TH",INR:"IN"},C=function(e){var n=Object.entries(f).map((function(e){return e[1]})).find((function(n){return n.currencyCode===e}));return new Intl.NumberFormat(n.locale,{style:"currency",currency:n.currencyCode})},g=function(e){(0,u.Z)(t,e);var n=(0,h.Z)(t);function t(e,r,o,i,d){var a;return(0,s.Z)(this,t),a=n.call(this,e,r,o,i,d),(0,m.rC)((0,l.Z)(a),{balance:m.LO}),a}return(0,a.Z)(t)}((0,a.Z)((function e(n,t,r,o,i){(0,s.Z)(this,e),this.id=void 0,this.name=void 0,this.countryCode=void 0,this.balance=void 0,this.currencyCode=void 0,this.id=n,this.name=t,this.countryCode=r,this.balance=o,this.currencyCode=i}))),y=[{id:1,name:"John Smith",countryCode:"US",balance:993.95,currencyCode:"USD"},{id:2,name:"Luce Pierre",countryCode:"EU",balance:998.12,currencyCode:"EUR"}],p=(0,a.Z)((function e(n,t){var r,o=this;(0,s.Z)(this,e),this.rootStore=void 0,this.clients=[],this.addClient=void 0,this.reset=void 0,this.save=void 0,console.log("creating ClientStore..."),this.rootStore=n,this.save=function(){t.save("mcd/clients",JSON.stringify(o.clients)),console.log("saved ".concat(o.clients.length," client(s)"))};var i=function(e){return new g(e.id,e.name,e.countryCode,e.balance,e.currencyCode)};this.reset=function(){console.log("reset Clients"),o.clients=y.map(i),o.rootStore.orderStore.reset(),o.rootStore.uiStore.selectedClientId=1},this.addClient=function(e,n,t){console.log("adding client...");var r=new g(Math.max.apply(Math,(0,c.Z)(o.clients.map((function(e){return e.id}))))+1,e,n,["RU","US","EU","GB"].includes(n)?1e3:3e4,f[n].currencyCode);return o.clients.push(r),r.id},this.clients=JSON.parse(null!==(r=t.load("mcd/clients"))&&void 0!==r?r:"[]"),console.log("loaded ".concat(this.clients.length," client(s)")),this.clients.length||(console.log("used initialClients"),this.clients=y),(0,m.rC)(this,{rootStore:!1,clients:m.LO,reset:m.aD.bound,addClient:m.aD.bound})})),I=(0,a.Z)((function e(n,t,r,o){(0,s.Z)(this,e),this.id=void 0,this.dondalId=void 0,this.name=void 0,this.price=void 0,this.id=n,this.dondalId=t,this.name=r,this.price=o,(0,m.rC)(this,{name:m.LO,price:m.LO})})),x=[{id:1,dondalId:1,name:"Susi",price:249},{id:2,dondalId:1,name:"Pusi",price:349},{id:3,dondalId:1,name:"Susi-pusi",price:499},{id:4,dondalId:2,name:"Pelmeni",price:.37},{id:5,dondalId:2,name:"Vodka",price:3.62},{id:6,dondalId:2,name:"Caviar",price:3.2},{id:7,dondalId:2,name:"Kvass",price:.06},{id:8,dondalId:2,name:"Bread",price:.02}],S=(0,a.Z)((function e(n,t,r){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;(0,s.Z)(this,e),this.id=void 0,this.countryCode=void 0,this.name=void 0,this.terminated=void 0,this.balance=0,this.id=n,this.name=r,this.countryCode=t,this.terminated=o,this.balance=i,(0,m.rC)(this,{terminated:m.LO,balance:m.LO}),console.log((0,m.ZN)(this))})),_=[{id:1,countryCode:"JP",name:"\u795e\u98a8",terminated:!1,balance:0},{id:2,countryCode:"RU",name:"Red Corner",terminated:!1,balance:0}],w=function(){function e(n,t){var r,o,i=this;(0,s.Z)(this,e),this.rootStore=void 0,this.dondals=[],this.menuItems=[],this.addRandomDondal=void 0,this.reset=void 0,this.save=void 0,this.addMenuItem=void 0,console.log("creating DondalsStore..."),this.rootStore=n,this.save=function(){t.save("mcd/dondals",JSON.stringify(i.dondals)),console.log("saved ".concat(i.dondals.length," dondal(s)")),t.save("mcd/menuItems",JSON.stringify(i.menuItems)),console.log("saved ".concat(i.menuItems.length," menuItem(s)"))},this.reset=function(){console.log("reset"),i.dondals=_,i.menuItems=x},this.addRandomDondal=function(){console.log("adding dondal..."),i.dondals.push({id:Math.max.apply(Math,(0,c.Z)(i.dondals.map((function(e){return e.id}))))+1,countryCode:["EU","GB","RU"][Math.floor(3*Math.random())],name:"Dondal"+Date.now(),terminated:!1,balance:0})},this.addMenuItem=function(e,n,t){console.log("adding menuItem...");var r=new I(Math.max.apply(Math,(0,c.Z)(i.menuItems.map((function(e){return e.id}))))+1,e,n,t);return i.menuItems.push(r),r},this.dondals=JSON.parse(null!==(r=t.load("mcd/dondals"))&&void 0!==r?r:"[]"),console.log("loaded ".concat(this.dondals.length," dondal(s)")),this.dondals.length||(console.log("used initialDondals"),this.dondals=_),this.menuItems=JSON.parse(null!==(o=t.load("mcd/menuItems"))&&void 0!==o?o:"[]"),console.log("loaded ".concat(this.menuItems.length," menuItem(s)")),this.menuItems.length||(console.log("used initialMenuItems"),this.menuItems=x),(0,m.rC)(this,{rootStore:!1,dondals:m.LO,menuItems:m.LO,reset:m.aD.bound,addRandomDondal:m.aD.bound,addMenuItem:m.aD.bound,updateMenuItem:m.aD.bound,removeMenuItem:m.aD.bound,addDondal:m.aD.bound})}return(0,a.Z)(e,[{key:"updateMenuItem",value:function(e,n,t){var r=this.menuItems.find((function(n){return n.id===e}));if(!r)throw new Error("Menu Item not found.");r.name=n,r.price=t}},{key:"removeMenuItem",value:function(e){console.log("removing menuItem..."),this.menuItems=this.menuItems.filter((function(n){return n.id!==e}))}},{key:"addDondal",value:function(e,n){console.log("adding dondal...");var t=new S(Math.max.apply(Math,(0,c.Z)(this.dondals.map((function(e){return e.id}))))+1,e,n,!1);return this.dondals.push(t),t}},{key:"dispose",value:function(){console.log("disposing DondalsStore...")}}]),e}(),j=t(7762),A=function(){function e(n,t){var r=this;(0,s.Z)(this,e),this.currencyCode=void 0,this.currencyName=void 0,this.countryCode=void 0,this.valueStr="0",this.trend="same",this.dispose=void 0,this.currencyCode=n,this.countryCode=Object.entries(f).find((function(e){return e[1].currencyCode===n}))[0],this.currencyName=f[this.countryCode].currencyName;var o=!1;this.dispose=function(){o=!0},(0,m.rC)(this,{currencyCode:!1,currencyName:!1,countryCode:!1,valueStr:m.LO,trend:m.LO,value:m.Fl,dispose:!1});var i=function(){setTimeout((function(){var e=function(){var e=t.from+Math.random()*(t.to-t.from),n=e.toString().indexOf(".");-1===n&&(n=e.toString().length);var r=5-n+(e<1?1:0);return e.toFixed(r)}(),n=parseFloat(e);(0,m.z)((function(){0===r.value||n>r.value&&(r.trend="up")||n<r.value&&(r.trend="down")||(r.trend="same"),r.valueStr=e}))}),0===r.value?100:4e3*Math.random()+2e3)};(0,m.U5)((function(){return r.value}),(function(){i()}),{fireImmediately:!0,scheduler:function(e){!o&&e()}})}return(0,a.Z)(e,[{key:"value",get:function(){return parseFloat(this.valueStr)}}]),e}(),O=function(){function e(n,t,r){var o=this;(0,s.Z)(this,e),this.rootStore=void 0,this.rates=[],console.log("creating ExchangeStore..."),this.rootStore=n,r.forEach((function(e){var n=new A(e.currencyCode,e.range);o.rates.push(n)})),(0,m.rC)(this,{rootStore:!1,rates:m.LO,ratesObj:m.Fl})}return(0,a.Z)(e,[{key:"ratesObj",get:function(){var e,n={},t=(0,j.Z)(this.rates);try{for(t.s();!(e=t.n()).done;){var r=e.value;n[r.currencyCode]=r.value}}catch(o){t.e(o)}finally{t.f()}return n}},{key:"dispose",value:function(){console.log("disposing ExchangeStore..."),this.rates.forEach((function(e){e.dispose()}))}}]),e}(),N=(0,a.Z)((function e(n,t,r,o,i){(0,s.Z)(this,e),this.id=void 0,this.orderId=void 0,this.item=void 0,this.price=void 0,this.quantity=void 0,this.id=n,this.orderId=t,this.item=r,this.price=o,this.quantity=i})),b=function(e){(0,u.Z)(t,e);var n=(0,h.Z)(t);function t(e,r,o,i,d,a){var c;return(0,s.Z)(this,t),(c=n.call(this,r,o,i,d,a)).store=void 0,c.store=e,(0,m.rC)((0,l.Z)(c),{store:!1,id:!1,orderId:!1,item:m.LO,price:m.LO,quantity:m.LO}),c}return(0,a.Z)(t,[{key:"order",get:function(){var e=this;return this.store.orders.find((function(n){return n.id===e.orderId}))}}]),t}(N),Z=(0,a.Z)((function e(n,t,r,o,i,d,a){(0,s.Z)(this,e),this.id=void 0,this.clientId=void 0,this.orderCurrencyCode=void 0,this.paymentCurrencyCode=void 0,this.isPaid=void 0,this.isDelivered=void 0,this.paid=void 0,this.id=n,this.clientId=t,this.orderCurrencyCode=r,this.paymentCurrencyCode=o,this.isPaid=i,this.isDelivered=d,this.paid=a})),D=function(e){(0,u.Z)(t,e);var n=(0,h.Z)(t);function t(e,r,o,i,d){var a,c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],h=arguments.length>7?arguments[7]:void 0;return(0,s.Z)(this,t),(a=n.call(this,r,o,i,d,c,u,h)).store=void 0,a.store=e,(0,m.rC)((0,l.Z)(a),{store:!1,id:!1,clientId:!1,orderCurrencyCode:!1,paymentCurrencyCode:m.LO,isPaid:m.LO,isDelivered:m.LO,items:m.Fl,total:m.Fl,addItem:m.aD.bound}),a}return(0,a.Z)(t,[{key:"items",get:function(){var e=this;return this.store.orderItems.filter((function(n){return n.orderId===e.id}))}},{key:"total",get:function(){return this.items.reduce((function(e,n){return e+n.price*n.quantity}),0)}},{key:"client",get:function(){var e=this;return this.store.rootStore.clientStore.clients.find((function(n){return n.id===e.clientId}))}},{key:"addItem",value:function(e,n,t){console.log("adding orderItem...");var r=new b(this.store,Math.max.apply(Math,(0,c.Z)(this.store.orderItems.map((function(e){return e.id}))))+1,this.id,e,n,t);this.store.orderItems.push(r)}}]),t}(Z),M=[new Z(1,1,"RUB","USD",!0,!0,6.05),new Z(2,2,"JPY","EUR",!0,!0,1.88)],V=[new N(1,1,"Pelmeni",.37,1),new N(2,1,"Vodka",3.62,1),new N(3,2,"Susi",249,1)],R=(0,a.Z)((function e(n,t){var r,o,i=this;(0,s.Z)(this,e),this.rootStore=void 0,this.orders=[],this.orderItems=[],this.addOrder=void 0,this.addOrderItem=void 0,this.reset=void 0,this.save=void 0,console.log("creating OrderStore..."),this.rootStore=n,this.save=function(){t.save("mcd/orders",JSON.stringify(i.orders.map((function(e){return{id:e.id,clientId:e.clientId,orderCurrencyCode:e.orderCurrencyCode,paymentCurrencyCode:e.paymentCurrencyCode,isPaid:e.isPaid,isDelivered:e.isDelivered,paid:e.paid}})))),console.log("saved ".concat(i.orders.length," order(s)")),t.save("mcd/orderItems",JSON.stringify(i.orderItems.map((function(e){return{id:e.id,orderId:e.orderId,item:e.item,price:e.price,quantity:e.quantity}})))),console.log("saved ".concat(i.orderItems.length," orderItem(s)"))};var d=function(e){return new D(i,e.id,e.clientId,e.orderCurrencyCode,e.paymentCurrencyCode,e.isPaid,e.isDelivered,e.paid)},a=function(e){return new b(i,e.id,e.orderId,e.item,e.price,e.quantity)};this.reset=function(){console.log("reset Orders"),i.orders=M.map(d),console.log("reset OrderItems"),i.orderItems=V.map(a)},this.addOrder=function(e,n,t,r,o,d){console.log("adding order...");var s=new D(i,Math.max.apply(Math,(0,c.Z)(i.orders.map((function(e){return e.id}))))+1,e,n,t,r,o,d);return i.orders.push(s),s},this.addOrderItem=function(e,n,t,r){console.log("adding orderItem...");var o=new b(i,Math.max.apply(Math,(0,c.Z)(i.orderItems.map((function(e){return e.id}))))+1,e,n,t,r);return i.orderItems.push(o),o},this.orders=JSON.parse(null!==(r=t.load("mcd/orders"))&&void 0!==r?r:"[]").map(d),console.log("loaded ".concat(this.orders.length," order(s)")),this.orders.length||(console.log("used initialOrders"),this.orders=M.map(d)),this.orderItems=JSON.parse(null!==(o=t.load("mcd/orderItems"))&&void 0!==o?o:"[]").map(a),console.log("loaded ".concat(this.orderItems.length," orderItems(s)")),this.orderItems.length||(console.log("used initialOrderItems"),this.orderItems=V.map(a)),(0,m.rC)(this,{rootStore:!1,orders:m.LO,orderItems:m.LO,reset:m.aD.bound,addOrder:m.aD.bound,addOrderItem:m.aD.bound})})),k=function(){function e(){(0,s.Z)(this,e)}return(0,a.Z)(e,[{key:"save",value:function(e,n){localStorage.setItem(e,n)}},{key:"load",value:function(e){return localStorage.getItem(e)}}]),e}(),P=function(){function e(n,t){(0,s.Z)(this,e),this.rootStore=void 0,this.selectedDondalId=1,this.selectedClientId=1,this.isCreateNewOrderVisible=!1,this.newOrderTotal=0,this.newOrderClientsTotal=0,this.selectedOrderId=null,console.log("creating ClientStore..."),this.rootStore=n,(0,m.rC)(this,{selectedDondalId:m.LO,selectedClientId:m.LO,selectedOrderId:m.LO,isCreateNewOrderVisible:m.LO,newOrderTotal:m.LO,newOrderClientsTotal:m.LO,selectedClient:m.Fl,selectedDondal:m.Fl,selectedOrder:m.Fl})}return(0,a.Z)(e,[{key:"selectedClient",get:function(){var e=this;return this.rootStore.clientStore.clients.find((function(n){return n.id===e.selectedClientId}))}},{key:"selectedDondal",get:function(){var e=this;return this.rootStore.dondalsStore.dondals.find((function(n){return n.id===e.selectedDondalId}))}},{key:"selectedOrder",get:function(){var e=this;return this.rootStore.orderStore.orders.find((function(n){return n.id===e.selectedOrderId}))}}]),e}(),U=function(){function e(){var n=this;(0,s.Z)(this,e),this.orderStore=void 0,this.clientStore=void 0,this.dondalsStore=void 0,this.exchangeStore=void 0,this.uiStore=void 0,this.save=void 0,console.log("creating RootStore:"),this.uiStore=new P(this,new k),this.clientStore=new p(this,new k),this.orderStore=new R(this,new k),this.dondalsStore=new w(this,new k),this.exchangeStore=new O(this,new k,[{currencyCode:"USD",range:{from:1,to:1}},{currencyCode:"EUR",range:{from:1.01,to:1.1}},{currencyCode:"RUB",range:{from:.66,to:.66}},{currencyCode:"GBP",range:{from:.8,to:.85}},{currencyCode:"JPY",range:{from:135,to:139}},{currencyCode:"THB",range:{from:32,to:37}},{currencyCode:"INR",range:{from:73,to:80}}]),this.save=function(){console.log("saving RootStore..."),n.clientStore.save(),n.orderStore.save(),n.dondalsStore.save()}}return(0,a.Z)(e,[{key:"dispose",value:function(){console.log("disposing RootStore..."),this.exchangeStore.dispose(),this.dondalsStore.dispose()}}]),e}(),E=t(184);console.log("<createContext<RootStore>>");var B=(0,r.createContext)(void 0);console.log("</createContext<RootStore>>");var L=function(e){var n=e.children,t=(0,r.useState)((function(){console.log("<useState in RootStoreProvider>");var e=new U;return console.log("</useState in RootStoreProvider>"),e})),o=(0,d.Z)(t,1)[0];return(0,r.useEffect)((function(){return function(){o.save(),o.dispose()}}),[]),(0,E.jsx)(B.Provider,{value:o,children:n})},T=function(){return(0,r.useContext)(B)},Y=t(1413),F=t(5987),J="AddNewDondalView_newDondal__FvhMC",K="AddNewDondalView_disabled__eEeWX",G="AddNewDondalView_add__iuBhH",Q=["setDondalId"],q=function(e){var n=e.setDondalId,t=(0,F.Z)(e,Q),o=T().dondalsStore,i=(0,r.useState)(null),s=(0,d.Z)(i,2),a=s[0],c=s[1],l=(0,r.useState)(""),u=(0,d.Z)(l,2),h=u[0],m=u[1],v=(0,r.useRef)(null);(0,r.useEffect)((function(){setTimeout((function(){var e;return null===(e=v.current)||void 0===e?void 0:e.focus()}),0)}),[a]);return(0,E.jsxs)("div",(0,Y.Z)((0,Y.Z)({className:J},t),{},{children:[(0,E.jsx)("label",{children:"Country:"}),(0,E.jsxs)("select",{value:a||"",onChange:function(e){return c(e.target.value)},children:[(0,E.jsx)("option",{value:"",children:"--- Select country ---"}),Object.entries(f).map((function(e){return(0,E.jsx)("option",{value:e[0],children:e[1].country},e[0])}))]}),(0,E.jsx)("br",{}),(0,E.jsx)("label",{children:"Name:"}),(0,E.jsx)("input",{type:"text",ref:v,value:h,onChange:function(e){return m(e.target.value)}}),(0,E.jsx)("span",{className:"".concat(G," ").concat(a&&h?"":K),onClick:function(){var e=o.addDondal(a,h.trim());n(e.id),m(""),c(null)}})]}))},z="DondalView_dondals__pzbK2",W="DondalView_remove__19fyK",H="DondalView_disabled__96Umf",X=t(4261),$="Logo_dondaldLogo__1jtE3",ee="Logo_logo__xT5Y5",ne=function(e){var n=e.countryCode,t=X.ZP[n];return console.log("--- rendering Logo"),(0,E.jsx)("div",{className:$,children:(0,E.jsxs)("div",{className:ee,children:[(0,E.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFkAAAAhCAYAAACyegcDAAABwElEQVRoQ+2Z27KDIAxF9f8/2o6d0smkuZdIbHPejkKExc6N7lv/pRPY07/QH9jKQj6O7cDns+911ytpqSRkCvDYxB1Bl4MsAb4r6IZ8Qc5oyA2ZJnC3uNxKbiW3klM00NVFCtZPo10nB0FbFHqaPpMaN3YkPI+t4HKnTrsk8VmhiK3pq6X22qpQiaRD9kKhQHsVXO3OIxVyBcAVWvE0yDMAazHaGzhXhY4lkPFmtWpCew9he8Z6Dyk6/nLInJqkikKrNvDmveOj8KzzLoWsuSt3UR+5wI/MsULzjmvIXmKB8Q2ZgXZ6guR52ntoloTMGfAYjrhrpXCh7XW8H2uWDuQDMpwMJ3LPOe/5F8jn/rUDmQIZAtW6s9XVhaRAqEoIjnpOiY7i8Kz1cY1pUS9eADeHU/nKOhm7twRrXFZh4eDnlJoho+mQB1ipKfAkaOlWzmMHdo8eIeFQoIVT8u5ltpKt3ZcVkBZ+InYyIA81U3clbyV7KwprIpyh6G9BU1Chx0nub1Uy1XWO706HTB3WStBU/NeU7EmA+LCo/7+GLLlJJHRk/zLCKRPuw5rwqCQqhgtrbOtxfgJpbbV/Kb874wGOQA1A1e3m4gAAAABJRU5ErkJggg==",alt:"logo.png"}),(0,E.jsx)(t,{})]})})},te="MenuItemView_menuItem__VmGRC",re="MenuItemView_name__DmQ0Z",oe="MenuItemView_price__0xXuw",ie="MenuItemView_remove__r984f",de="MenuItemView_edit__Rq39g",se="MenuItemView_cancel__yR5R9",ae="MenuItemView_save__f4Zdh",ce="MenuItemView_view__4CMg9",le=function(e){var n=e.menuItem,t=e.currencyFormatter,o=T().dondalsStore,i=(0,r.useState)(!1),s=(0,d.Z)(i,2),a=s[0],c=s[1],l=(0,r.useState)(n.name),u=(0,d.Z)(l,2),h=u[0],m=u[1],f=(0,r.useState)(n.price),v=(0,d.Z)(f,2),C=v[0],g=v[1],y=(0,r.useRef)(null);return(0,E.jsxs)("li",{className:"".concat(te," ").concat(a?de:ce),children:[(0,E.jsx)("span",{className:re,children:n.name}),(0,E.jsx)("input",{type:"text",className:re,value:h,onChange:function(e){return m(e.target.value)}}),(0,E.jsx)("span",{className:oe,children:t(n.price)}),(0,E.jsx)("input",{type:"number",className:oe,ref:y,value:C,onChange:function(e){return g(parseFloat(e.target.value))}}),(0,E.jsx)("span",{className:ie,onClick:function(){o.removeMenuItem(n.id)}}),(0,E.jsx)("span",{className:de,onClick:function(){c(!0),setTimeout((function(){var e,n;null===(e=y.current)||void 0===e||e.focus(),null===(n=y.current)||void 0===n||n.select()}),0)}}),(0,E.jsx)("span",{className:se,onClick:function(){m(n.name),g(n.price),c(!1)}}),(0,E.jsx)("span",{className:ae,onClick:function(){m((function(e){return e.trim()})),o.updateMenuItem(n.id,h,C),c(!1)}})]},n.id)},ue="MenuView_menu__EB74n",he="AddMenuItemView_addItem__TUOvR",me="AddMenuItemView_disabled__2UziJ",fe=["dondalId"],ve=function(e){var n=e.dondalId,t=(0,F.Z)(e,fe),o=T().dondalsStore,i=(0,r.useState)(""),s=(0,d.Z)(i,2),a=s[0],c=s[1],l=(0,r.useState)(""),u=(0,d.Z)(l,2),h=u[0],m=u[1],f=(0,r.useRef)(null);(0,r.useEffect)((function(){setTimeout((function(){var e;null===(e=f.current)||void 0===e||e.focus()}),0)}),[n]);var v=function(){return o.menuItems.filter((function(e){return e.dondalId===n})).length>4};return(0,E.jsxs)("div",(0,Y.Z)((0,Y.Z)({className:he},t),{},{children:[(0,E.jsx)("input",{type:"text",value:a,onChange:function(e){return c(e.target.value)},disabled:v(),ref:f,placeholder:"Menu entry name"}),(0,E.jsx)("input",{type:"number",value:h,onChange:function(e){return m(e.target.value)},disabled:v()}),(0,E.jsx)("span",{className:a.length&&h?"":me,onClick:function(){o.addMenuItem(n,a,parseFloat(h)),c(""),m("")}})]}))},Ce=(0,i.Pi)((function(e){var n=e.dondal,t=T().dondalsStore,r=f[n.countryCode],o=function(e){return new Intl.NumberFormat(r.locale,{style:"currency",currency:r.currencyCode}).format(e)};return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(ve,{style:{marginBottom:"5px"},dondalId:n.id}),(0,E.jsx)("br",{}),(0,E.jsx)("ul",{className:ue,children:t.menuItems.filter((function(e){return e.dondalId===n.id})).sort((function(e,n){return e.id-n.id})).map((function(e){return(0,E.jsx)(le,{menuItem:e,currencyFormatter:o},e.id)}))})]})})),ge=Ce,ye=(0,i.Pi)((function(e){var n=e.id,t=e.refresh,o=(0,r.useState)(null!==n&&void 0!==n?n:1),i=(0,d.Z)(o,2),s=(i[0],i[1],T().dondalsStore.dondals.find((function(e){var t;return null!==(t=e.id===n)&&void 0!==t?t:1}))),a=(0,m.aD)((function(){s.terminated=!0,t()}));return console.log("--- rendering DondalView"),(0,E.jsxs)("div",{className:z,children:[(0,E.jsx)(ne,{countryCode:s.countryCode}),(0,E.jsx)("span",{className:"".concat(W," ").concat(1===n?H:""),onClick:a}),(0,E.jsx)("br",{}),(0,E.jsx)(ge,{dondal:s})]})})),pe="DondalsMainView_dondalsMain__83W8b",Ie="DondalsMainView_selector__bV8FX",xe="DondalsMainView_balance__+jkl9",Se="DondalsMainView_restore__SaB2d",_e=(0,i.Pi)((function(){var e=(0,r.useState)(1),n=(0,d.Z)(e,2),t=n[0],o=n[1],i=T().dondalsStore,s=i.rootStore.uiStore;(0,r.useEffect)((function(){console.log("useEffect. dondalId="+t),(0,m.z)((function(){i.rootStore.uiStore.selectedDondalId=t}))}),[t]);return(0,E.jsxs)("div",{className:pe,children:[(0,E.jsxs)("div",{className:Ie,style:{height:25},children:[(0,E.jsx)("select",{value:t,onChange:function(e){return o(parseInt(e.target.value))},children:i.dondals.filter((function(e){return!e.terminated})).map((function(e){return(0,E.jsxs)("option",{value:e.id,children:["(",e.countryCode,") ",e.name]},e.id)}))}),(0,E.jsx)("img",{className:Se,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAABPklEQVRIid2VMUsDQRCFPxVMIkRiI4idja1YWtkGi4ilnV0wiY3/yr8RxViYCCJJERvjL1BBbDyLfQfrubt32bPRB8Pe7bx573aZ4eA/4gB4BpI5YwY0ixjMIsTTeMqKLTgMkiJfEcA3zcWSYrlwGVyW0OuXqP1DuCK+iwpdUVGxO+AU2AZqwBqw+xsG70CbEh2YJ74vXgXoAQPgTTEAusByrEFbnE3MFfl4I3Gc6HuK7jFTWrHEx0ALqCsOgYlyw7yT+HBmiTcc+YZl0okxuFFxK8A5EufalfTNQU35V73XAwar4ry4Wm3PU1TV+qF1KWCwkj7M08tbWsdae8Cjh5u28oMr6fvhnCt/ktnPYl3GCWYmfqDpMZliTrwDfDoMqsCxJT4isk2nlvittT+x9ofARox4CBeYtuxihhGALym9pkQ1nNoUAAAAAElFTkSuQmCC"}),(0,E.jsx)("span",{className:Se,onClick:function(){o(1),i.reset()}}),(0,E.jsxs)("label",{className:xe,children:["Balance: ",C(f[s.selectedDondal.countryCode].currencyCode).format(s.selectedDondal.balance)]})]}),(0,E.jsx)(q,{setDondalId:o,style:{top:28,left:130}}),(0,E.jsx)(ye,{id:t,refresh:function(){return o(1)}})]})})),we=t(4942),je={newOrder:"CreateNewOrderView_newOrder__YJqcp",hidden:"CreateNewOrderView_hidden__+FXZL",total:"CreateNewOrderView_total__8zDcn"},Ae=["className","onNewOrderCreated"],Oe=(0,i.Pi)((function(e){var n,t=e.className,o=e.onNewOrderCreated,i=(0,F.Z)(e,Ae);console.log("--- rendering CreateNewOrderView");var s=T(),a=s.uiStore,c=a.selectedDondalId,l=a.isCreateNewOrderVisible,u=(0,r.useState)({}),h=(0,d.Z)(u,2),v=h[0],g=h[1];console.log(v);var y=function(){var e=s.dondalsStore.menuItems.filter((function(e){return e.dondalId===c})).reduce((function(e,n){return e+n.price*(v[n.id]||0)}),0);return(0,m.z)((function(){a.newOrderTotal=e})),e},p=C(f[a.selectedDondal.countryCode].currencyCode).format;return(0,E.jsxs)("div",(0,Y.Z)((0,Y.Z)({className:"".concat(je.newOrder," ").concat(l?"":je.hidden," ").concat(null!==t&&void 0!==t?t:"")},i),{},{children:[c&&s.dondalsStore.menuItems.filter((function(e){return e.dondalId===c})).map((function(e){return(0,E.jsxs)("div",{className:je.mi,children:[(0,E.jsx)("span",{children:e.name}),(0,E.jsx)("span",{children:p(e.price)}),(0,E.jsx)("span",{children:" x"}),(0,E.jsx)("input",{type:"number",value:v[e.id]||"",onChange:function(n){return t=e,r=parseInt(n.target.value||"0"),void g((0,Y.Z)((0,Y.Z)({},v),{},(0,we.Z)({},t.id,r<1?0:r>99?99:r)));var t,r}}),!!v[e.id]&&(0,E.jsxs)("span",{children:["  = ",p(v[e.id]*e.price)]})]},e.id)})),c&&(0,E.jsxs)("div",{className:je.total,children:[(0,E.jsx)("label",{children:"Total: "}),(0,E.jsx)("span",{style:{color:((null===(n=a.selectedClient)||void 0===n?void 0:n.balance)||0)<a.newOrderClientsTotal?"red":"black"},children:function(){var e=a.selectedClient,n=a.selectedDondal,t=s.exchangeStore.ratesObj,r=y()/(t[f[n.countryCode].currencyCode]||1)*(t[e.currencyCode]||1);return(0,m.z)((function(){a.newOrderClientsTotal=r})),C(e.currencyCode).format(r)}()}),(0,E.jsx)("span",{children:p(y())})]}),(0,E.jsxs)("footer",{children:[(0,E.jsx)("button",{onClick:function(){var e=s.orderStore.addOrder(a.selectedClientId,f[a.selectedDondal.countryCode].currencyCode,a.selectedClient.currencyCode,!0,!0,a.newOrderClientsTotal);s.dondalsStore.menuItems.filter((function(e){return e.dondalId===c&&(v[e.id]||0)>0})).forEach((function(n){s.orderStore.addOrderItem(e.id,n.name,n.price,v[n.id])})),(0,m.z)((function(){a.selectedClient.balance-=a.newOrderClientsTotal})),(0,m.z)((function(){a.selectedOrderId=e.id,a.isCreateNewOrderVisible=!1})),(0,m.z)((function(){a.selectedDondal.balance+=a.newOrderTotal})),g({}),o(e.id)},disabled:a.selectedClient.balance<a.newOrderClientsTotal||0===a.newOrderClientsTotal,children:"Pay"}),(0,E.jsx)("button",{onClick:function(){(0,m.z)((function(){a.isCreateNewOrderVisible=!1})),g({}),o(null)},children:"Cancel"})]})]}))})),Ne="OrderListView_orderlist__j0YtI",be="OrderListView_hidden__-ttc7",Ze=(0,i.Pi)((function(e){var n=e.clientId,t=T().orderStore,o=t.rootStore.uiStore,i=!o.isCreateNewOrderVisible,d=(0,r.useRef)(null);(0,r.useEffect)((0,m.aD)((function(){var e;o.selectedOrderId=null===(e=t.orders.filter((function(e){return e.clientId===n})).sort((function(e,n){return n.id-e.id}))[0])||void 0===e?void 0:e.id})),[n]),(0,r.useEffect)((function(){var e;null===(e=d.current)||void 0===e||e.scroll(0,0)}),[t.orders.filter((function(e){return e.clientId===n})).length]);var s=(0,m.aD)((function(e){o.selectedOrderId=e.id}));return(0,E.jsx)(E.Fragment,{children:(0,E.jsx)("ul",{ref:d,className:"".concat(Ne," ").concat(i?"":be),children:t.orders.filter((function(e){return e.clientId===n})).sort((function(e,n){return n.id-e.id})).map((function(e){return(0,E.jsxs)("li",{onClick:function(){return s(e)},style:{background:e.id===o.selectedOrderId?"#f3de6a":"inherit"},children:[(0,E.jsx)("span",{children:C(e.orderCurrencyCode).format(e.total)}),(0,E.jsxs)("span",{children:["(",C(e.paymentCurrencyCode).format(e.paid||0),")"]})]},e.id)}))})})})),De="OrderItemView_orderitem__06KEG",Me=(0,i.Pi)((function(e){var n=e.orderItem,t=C(n.order.orderCurrencyCode).format;return(0,E.jsxs)("li",{className:De,children:[(0,E.jsx)("label",{children:n.item}),(0,E.jsx)("span",{children:t(n.price)}),(0,E.jsx)("span",{children:" * "}),(0,E.jsx)("span",{children:n.quantity})]})})),Ve="OrderView_order__DnbjW",Re="OrderView_hidden__bQrMp",ke=(0,i.Pi)((function(e){var n=e.order;console.log("--- rendering Order"),console.log(n);var t=!T().uiStore.isCreateNewOrderVisible;return n?(0,E.jsxs)("div",{className:"".concat(Ve," ").concat(t?"":Re),children:[(0,E.jsx)("ul",{children:n.items.map((function(e){return(0,E.jsx)(Me,{orderItem:e},e.id)}))}),(0,E.jsx)("br",{}),(0,E.jsxs)("footer",{children:[(0,E.jsxs)("span",{children:["Total: ",C(n.orderCurrencyCode).format((null===n||void 0===n?void 0:n.total)||0)]}),(0,E.jsxs)("span",{children:["Paid: ",C(n.paymentCurrencyCode).format((null===n||void 0===n?void 0:n.paid)||0)]})]})]}):(0,E.jsx)(E.Fragment,{})})),Pe="IconButton_iconButton__QHkl2",Ue="IconButton_disabled__aCQ-m",Ee=["type","children","onClick","disabled","style"],Be={add:{code:"\uf0fe",tooltip:"Add"},remove:{code:"\uf2ed",tooltip:"Remove"},save:{code:"\uf0c7",tooltip:"Save"},edit:{code:"\uf044",tooltip:"Edit"},restore:{code:"",tooltip:"Restore"},cart:{code:"\uf217",tooltip:"New order"},cancel:{code:"\uf0e2",tooltip:"Cancel"},xmark:{code:"\uf00d",tooltip:"Close"},exit:{code:"\uf2f5",tooltip:"Exit"}},Le=(0,i.Pi)((function(e){var n=e.type,t=e.children,r=e.onClick,o=e.disabled,i=e.style,d=(0,F.Z)(e,Ee);return(0,E.jsx)("span",(0,Y.Z)((0,Y.Z)({},d),{},{style:(0,Y.Z)((0,Y.Z)({},i||{}),{},{"--tooltip":'"'.concat(null!==t&&void 0!==t?t:Be[n].tooltip,'"')}),"data-icon":Be[n].code,className:"".concat(Pe," ").concat(o()?Ue:""),onClick:r}))})),Te={},Ye=["setCountryCode","flag"],Fe=function(e){var n=e.setCountryCode,t=e.flag,o=((0,F.Z)(e,Ye),(0,r.useState)(null)),i=(0,d.Z)(o,2),s=i[0],a=i[1];(0,r.useEffect)((function(){a(null)}),[t]);return(0,E.jsxs)("select",{value:s||"",onChange:function(e){return function(e){var t=e.target.value||null;console.log({selected:t}),a(t),n(t)}(e)},className:Te.selectCountry,children:[(0,E.jsx)("option",{value:"",children:"- Select country -"}),Object.entries(f).map((function(e){return(0,E.jsx)("option",{value:e[0],children:e[1].country},e[0])}))]})},Je="AddNewClientView_newClient__yybCY",Ke="AddNewClientView_hidden__80gUD",Ge=(0,i.Pi)((function(e){var n=e.hidden,t=e.onClientAdd,o=T().clientStore,i=(0,r.useState)(""),s=(0,d.Z)(i,2),a=s[0],c=s[1],l=(0,r.useState)(!1),u=(0,d.Z)(l,2),h=u[0],m=u[1],v=(0,r.useState)(null),C=(0,d.Z)(v,2),g=C[0],y=C[1],p=(0,r.useRef)(null);return(0,r.useEffect)((function(){setTimeout((function(){var e;return null===(e=p.current)||void 0===e?void 0:e.focus()}),0)})),(0,E.jsxs)("div",{className:"".concat(Je," ").concat(n?Ke:""),children:[(0,E.jsx)("input",{type:"text",ref:p,placeholder:"Full Name",value:a,onChange:function(e){return c(e.target.value)}}),(0,E.jsx)(Fe,{setCountryCode:y,flag:h}),(0,E.jsx)(Le,{type:"cancel",onClick:function(){m((function(e){return!e})),c(""),y(null),t(null)},disabled:function(){return!1},style:{marginLeft:5}}),(0,E.jsx)(Le,{type:"save",onClick:function(){var e=o.addClient(a,g,f[g].currencyCode);m((function(e){return!e})),c(""),y(null),t(e)},disabled:function(){return 0===a.trim().length||null===g},style:{marginLeft:5}})]})})),Qe="PurchasesByCountry_purchases__W6+C0",qe="PurchasesByCountry_hidden__a5Zi6",ze="PurchasesByCountry_circle__zCr-L",We="PurchasesByCountry_countries__H3MiM",He=function(){var e=T().uiStore,n=e.rootStore.orderStore.orders.filter((function(n){return n.clientId===e.selectedClientId&&n.isPaid})).reduce((function(e,n){var t;return e[v[n.orderCurrencyCode]]+=null!==(t=n.paid)&&void 0!==t?t:0,e}),{RU:0,TH:0,IN:0,JP:0,EU:0,GB:0,US:0});console.log(n);var t=Object.values(n).reduce((function(e,n){return e+n}));console.log("total: ",t);var r,o={RU:"red",TH:"rgb(187, 255, 0)",IN:"green",JP:"yellow",EU:"brown",GB:"rgb(255, 0, 221)",US:"rgb(0, 255, 255)"},i=[],d=0,s=[],a=(0,j.Z)(Object.keys(n));try{for(a.s();!(r=a.n()).done;){var c=r.value;if(console.log(c,": ",n[c]),n[c]){var l=n[c]/t,u="".concat(o[c]," ").concat(d,"turn ").concat(d+l,"turn");i.push(u),d+=l,s.push(c)}}}catch(h){a.e(h)}finally{a.f()}console.log(i.join(","));return(0,E.jsxs)("div",{className:"".concat(Qe," ").concat(e.isCreateNewOrderVisible||0===t?qe:""),children:[(0,E.jsx)("div",{className:ze,style:{background:"conic-gradient(".concat(i.join(","),")")}}),(0,E.jsx)("div",{className:We,children:Object.keys(o).map((function(e){return(0,E.jsx)("div",{className:(n=e,s.includes(n)?"":qe),children:e},e);var n}))})]})},Xe="ClientsMainView_clientsMain__+gIea",$e="ClientsMainView_selector__lXgY5",en="ClientsMainView_hidden__enzxD",nn="ClientsMainView_balance__nsNPg",tn="ClientsMainView_orders__necOL",rn="ClientsMainView_cnov__JXLwD",on="ClientsMainView_purchases__X-2kg",dn=(0,i.Pi)((function(){var e=T().clientStore,n=e.rootStore.uiStore,t=(0,r.useState)(!1),o=(0,d.Z)(t,2),i=o[0],s=o[1];return(0,E.jsxs)("div",{className:Xe,children:[(0,E.jsxs)("div",{className:$e,children:[(0,E.jsxs)("div",{className:i?en:"",children:[(0,E.jsx)(Le,{type:"add",onClick:function(){return s(!0)},disabled:function(){return!1},style:{top:1,marginRight:5},children:"Add new client"}),(0,E.jsx)("select",{value:n.selectedClientId,onChange:function(e){return n.selectedClientId=parseInt(e.target.value)},children:e.clients.map((function(e){return(0,E.jsxs)("option",{value:e.id,children:["(",e.countryCode,") ",e.name]},e.id)}))}),(0,E.jsxs)("span",{className:nn,children:[" ",function(){var e=n.selectedClient;return console.log(n.selectedClientId,e),C(e.currencyCode).format(e.balance)}()]}),(0,E.jsx)(Le,{type:"cart",disabled:function(){return!!e.rootStore.uiStore.isCreateNewOrderVisible},onClick:function(){(0,m.z)((function(){e.rootStore.uiStore.isCreateNewOrderVisible=!0}))},style:{marginRight:2}})]}),(0,E.jsx)(Ge,{hidden:!i,onClientAdd:function(e){return function(e){s(!1),e&&(0,m.z)((function(){n.selectedClientId=e}))}(e)}})]}),(0,E.jsx)("br",{}),e.rootStore.uiStore.isCreateNewOrderVisible&&(0,E.jsx)(Oe,{onNewOrderCreated:function(e){console.log("orderId: "+e)},className:rn}),(0,E.jsxs)("div",{className:tn,children:[(0,E.jsx)(Ze,{clientId:n.selectedClientId}),(0,E.jsx)(ke,{order:e.rootStore.uiStore.selectedOrder}),(0,E.jsx)("div",{className:on,children:(0,E.jsx)(He,{})})]})]})})),sn="RateView_rate__yuCQZ",an="RateView_name__bc1Cl",cn="RateView_value__3SdBh",ln=(0,i.Pi)((function(e){var n=e.rate,t=X.ZP[n.countryCode];return(0,E.jsxs)("div",{className:sn,children:[(0,E.jsx)(t,{height:"10px"}),(0,E.jsx)("span",{className:an,children:n.currencyName}),(0,E.jsx)("span",{className:cn,children:n.valueStr}),"same"!==n.trend&&(0,E.jsx)("img",{style:{height:"10px",width:"15px"},src:"up"===n.trend?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAAV0lEQVQ4T2NkwAf+MxxgYGRwwKWEEadekEYYwGEAds3IGvEYgKkZm0YcBqBqxqcRiwEIzaga9RkYGC4yMDDAaNSggYYBlf0MsoPsABvVjIgiLEl04KIKAOzFIBAKmWwqAAAAAElFTkSuQmCC":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAAUElEQVQ4T2NkwAL+MzD8RxdmZGBgxCKGqXtUMyRMhmOAYYtbbAkI2f8oqYYYA5ADDiPJ4TMAPcQxNIOcRVHyRDcAWxxD/Y4rWCAuwKURpAsAxc0eELltIM0AAAAASUVORK5CYII="})]})})),un="ExchangeView_exchange__xdOPQ",hn=(0,i.Pi)((function(e){var n=e.rates;return(0,E.jsx)("div",{className:un,children:n.map((function(e){return(0,E.jsx)(ln,{rate:e},e.currencyCode)}))})})),mn="ExchangeMainView_exchangeMain__sW+zs",fn=(0,i.Pi)((function(e){var n=e.rates;return(0,E.jsx)("div",{className:mn,children:(0,E.jsx)(hn,{rates:n})})})),vn=(0,i.Pi)((function(){console.log("--- rendering McDondals"),console.log("<useRootStore>");var e=T();return console.log("</useRootStore>"),(0,E.jsxs)("div",{className:o,children:[(0,E.jsx)(_e,{}),(0,E.jsx)(dn,{}),(0,E.jsx)(fn,{rates:e.exchangeStore.rates}),(0,E.jsx)("br",{}),(0,E.jsx)("button",{onClick:e.clientStore.reset,children:"Reset clients"}),(0,E.jsx)("button",{onClick:e.orderStore.reset,children:"Reset orders"})]})})),Cn=function(){return(0,E.jsx)(L,{children:(0,E.jsx)(vn,{})})}}}]);
//# sourceMappingURL=1777.89fc3a3d.chunk.js.map