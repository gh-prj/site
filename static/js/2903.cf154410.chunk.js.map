{"version":3,"file":"static/js/2903.cf154410.chunk.js","mappings":"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","sources":["webpack://gh-react-site/./src/pages/react/MobX/Computeds/Computeds.module.scss?e733","pages/react/MobX/Computeds/Computeds.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Computeds_container__Hrb3J\",\"usage\":\"Computeds_usage__Q0Eg9\",\"chart\":\"Computeds_chart__IBHms\",\"blank\":\"Computeds_blank__DMQMp\",\"product\":\"Computeds_product__6y337\",\"ruler\":\"Computeds_ruler__0P4IM\"};","import { action, autorun, comparer, reaction } from 'mobx';\nimport { observer, useLocalObservable } from 'mobx-react';\nimport React, { useEffect, useRef } from 'react';\nimport styles from './Computeds.module.scss'\n\nconst Computeds = observer(() => {\n    const refBlank = useRef<HTMLDivElement>(null)\n    const refProduct = useRef<HTMLDivElement>(null)\n    const refUsage = useRef<HTMLSpanElement>(null)\n    const calc = useLocalObservable(() => ({\n        x: 0.5,\n        y: 0.2,\n        get productSize() {\n            return {\n                x: this.x,\n                y: this.y\n            }\n        },\n        get blankSize() {\n            return {\n                x: Math.ceil(this.x),\n                y: Math.ceil(this.y)\n            }\n        },\n        get usage() {\n            const blank = this.blankSize\n            return this.x * this.y * 100 / blank.x / blank.y\n        },\n    }), {})\n\n    useEffect(() => {\n        const dispose = reaction(\n            (r) => calc.blankSize,\n            (curr, prev, r) => {\n                refBlank.current!.style.transitionDelay = (curr.x < (prev?.x || 0) || curr.y < (prev?.y || 0)) ? '.9s' : '0s'\n                console.log('delay: ', refBlank.current!.style.transitionDelay)\n                refBlank.current!.style.width = 50 * curr.x + 'px'\n                refBlank.current!.style.height = 50 * curr.y + 'px'\n                console.log(`[Blank] x: ${curr.x}; y: ${curr.y}`)\n            },\n            {\n                fireImmediately: true\n                , equals: comparer.structural\n            }\n        )\n        return () => {\n            console.log('disposing...')\n            dispose()\n            console.log('disposed')\n        };\n    }, []);\n\n    useEffect(() => {\n        const dispose = reaction(\n            (r) => calc.productSize,\n            (curr, prev, r) => {\n                refProduct.current!.style.width = 50 * curr.x + 'px'\n                refProduct.current!.style.height = 50 * curr.y + 'px'\n                console.log(`[Product] x: ${curr.x}; y: ${curr.y}`)\n            },\n            {\n                fireImmediately: true\n            }\n        )\n        return () => {\n            dispose()\n        };\n    }, []);\n\n    useEffect(() => {\n        let prev = { x: 1, y: 1 }\n        let prevUsage = '10.00'\n        const dispose = autorun(() => {\n            const curr = calc.blankSize\n            const delay = (curr.x < prev.x || curr.y < prev.y) ? 900 : 700\n            const usage = calc.usage.toFixed(2)\n            prev = { x: curr.x, y: curr.y }\n            if (usage !== prevUsage) {\n                setTimeout(() => {\n                    refUsage.current!.textContent = usage + '%'\n                    refUsage.current!.style.border = '2px solid red'\n                    refUsage.current!.style.color = 'red'\n                    setTimeout(() => {\n                        refUsage.current!.style.border = '2px solid transparent'\n                        refUsage.current!.style.color = 'hsl(120, 92%, 33%)'\n                    }, 200)\n                }, delay)\n            }\n            prevUsage = usage\n        })\n        return () => {\n            dispose()\n        };\n    }, []);\n\n    return (\n        <div className={styles.container}>\n            <select onChange={\n                action(e => calc.x = parseFloat(e.target.value))\n            }>\n                <option value=\"0.5\">0.5</option>\n                <option value=\"1.0\">1.0</option>\n                <option value=\"1.3\">1.3</option>\n                <option value=\"1.7\">1.7</option>\n                <option value=\"2.0\">2.0</option>\n                <option value=\"2.5\">2.5</option>\n                <option value=\"3.1\">3.1</option>\n                <option value=\"3.8\">3.8</option>\n                <option value=\"4.1\">4.1</option>\n                <option value=\"4.9\">4.9</option>\n            </select>\n            <select onChange={\n                action(e => calc.y = parseFloat(e.target.value))\n            }>\n                <option value=\"0.2\">0.2</option>\n                <option value=\"1.1\">1.1</option>\n                <option value=\"1.8\">1.8</option>\n                <option value=\"2.1\">2.1</option>\n                <option value=\"2.5\">2.5</option>\n                <option value=\"2.9\">2.9</option>\n                <option value=\"3.2\">3.2</option>\n                <option value=\"3.7\">3.7</option>\n                <option value=\"4.4\">4.4</option>\n                <option value=\"4.8\">4.8</option>\n            </select>\n            <span ref={refUsage} className={styles.usage}>10.00%</span>\n            <div className={styles.chart}>\n                <div ref={refBlank} className={styles.blank}>\n                    <div ref={refProduct} className={styles.product}></div>\n                    <div className={styles.ruler}>\n                        <span>0</span>\n                        <span>1</span>\n                        <span>2</span>\n                        <span>3</span>\n                        <span>4</span>\n                        <span>5</span>\n                    </div>\n                    <div className={styles.ruler}>\n                        <span>5</span>\n                        <span>4</span>\n                        <span>3</span>\n                        <span>2</span>\n                        <span>1</span>\n                        <span>0</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n})\n\nexport default Computeds;\n"],"names":["observer","refBlank","useRef","refProduct","refUsage","calc","useLocalObservable","x","y","productSize","this","blankSize","Math","ceil","usage","blank","useEffect","dispose","reaction","r","curr","prev","current","style","transitionDelay","console","log","width","height","fireImmediately","equals","comparer","prevUsage","autorun","delay","toFixed","setTimeout","textContent","border","color","className","styles","onChange","action","e","parseFloat","target","value","ref"],"sourceRoot":""}